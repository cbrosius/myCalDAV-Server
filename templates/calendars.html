{% extends "base.html" %}

{% block title %}Calendars - My CalDAV Server{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Calendars</h1>
    <a href="/web/calendars/new" class="btn btn-primary">+ New Calendar</a>
</div>

{% if calendars.is_empty() %}
    <div class="empty-state">
        <div class="empty-icon">ðŸ“…</div>
        <h2>No calendars yet</h2>
        <p>Create your first calendar to start organizing your events.</p>
        <a href="/web/calendars/new" class="btn btn-primary">Create Calendar</a>
    </div>
{% else %}
    <div class="calendar-list">
        {% for calendar in calendars %}
        <div class="calendar-list-item">
            <div class="calendar-details">
                <h3>
                    <a href="/web/calendars/{{ calendar.id }}">{{ calendar.name }}</a>
                </h3>
                {% match calendar.description %}
                    {% when Some with (desc) %}
                        <p class="calendar-description">{{ desc }}</p>
                    {% when None %}
                {% endmatch %}
                <div class="calendar-meta">
                    <span>{{ event_counts.get(calendar.id).unwrap_or(&0) }} events</span>
                    {% if calendar.is_public %}
                        <span class="badge badge-public">Public</span>
                    {% else %}
                        <span class="badge badge-private">Private</span>
                    {% endif %}
                </div>
            </div>
            <div class="calendar-actions">
                <a href="/web/calendars/{{ calendar.id }}" class="btn btn-sm btn-secondary">View</a>
                <a href="/web/calendars/{{ calendar.id }}/edit" class="btn btn-sm btn-outline">Edit</a>
                <form action="/web/calendars/{{ calendar.id }}/delete" method="post" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this calendar?');">
                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}
